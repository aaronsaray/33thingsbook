<article>
    <h1>#22. What to Look For In Code Review <small>Look beyond the typos</small></h1>

    <p>Code review is a very important part of the programmer toolbox. When I say code review, I mean from both tech leads and peers. The process of code review can be different depending on your team and the technologies you employ. The general premise is, however, the same: you submit a section of code for another programmer to review. This process helps create better, higher quality code in the entire project. If you’re familiar with my blog and follow me on Twitter, you might recognize the rest of this chapter.</p>

    <p>A few days ago <span>(ok, a bunch of days)</span>, someone asked me on Twitter what I look for when I do a code review. After thinking for a while, I’ve distilled the list of things I look for down into something I can describe. Now, mind you, I don’t set out with my checkbox list or a manual, I just look at the code and “feel” it. Yes, that sounds crazy. I understand. But, subconsciously, I think I’m doing the following things when I do code reviews.</p>

    <p>First of all, I’m looking for bugs. I’m examining the quality of the code. In my open source career, you’d be surprised by the number of submissions to revision control I’ve seen with PHP or Javascript errors included <span>(free - no charge!)</span>. I always suggest using a lint tool before committing your changes <span>(or uploading them via FTP, or whatever you happen to use to deploy code)</span>. </p>

    <p>Quality also comes from sticking to a set of coding standards. In my projects, we have a coding standard that we use <span>(it’s a combination of PEAR and Zend Framework – but either of those really works)</span>. If the code strays from this too much, I will bring it up during the review. Please don’t confuse my suggestion of sticking to standards as architecture review. I’ll cover that later.</p>

    <p>Next, I focus on code architecture. Of course, it depends on the level of programmer who created the code you’re looking at, but there should always be some semblance of an architectural pattern throughout the code in question. In cases where things look haphazard <span>(you know, like “and me!” or “I’m an add on!”)</span>, I’m going to note that. </p>

    <p>It’s also important to pay attention to directions from a lead architect and proper design patterns. Sometimes programmers will come and chat with me about a solution. I try to guide them to the solution themselves. However, if they still need additional help, I might tell them the solution that I’d like to see implemented. When doing a code review, I’ll follow up on this direction and compare it to what I mentioned. If it is different, part of my review is asking for the details on why the programmer did what he did. This open dialog will sometimes increase my understanding of where the idea came from. It may open up more learning opportunities for the programmer and myself. In rare cases, if the programmer did not follow my directions and has no legitimate reason for doing it, that would be another thing I’d bring up as part of my review.</p>

    <p>I’ll also make sure the code appears to be “how we do it here.” That is to say, if the team has decided on a macro structure for features, a sort of company or team design, the code better be implemented with that in mind. That isn’t to say that I suggest staying in a less-stable version of an architecture, but instead I strive to ensure consistency. To state it another way, if we’re working at a mountain bike shop, we might bring in road bikes or hybrid bikes. But, we wouldn’t bring in a car.</p>

    <p>Don’t forget to spend some time reviewing code legibility. We’re typing, so why is this an issue? Code legibility actually has to do with the complexity or obscurity of the code. Sometimes, I’ll notice new programmers will create too complex code because of a lack of familiarity with the language being used. For example, PHP has a huge list of array manipulation functions. In my code review, I’ll see programmers unfamiliar with these functions recreating the wheel by building their own sorting algorithms. This is the perfect place to step in and suggest a better solution based on the language and technology in use.</p>

    <p>I also look at the complexity of a code block and how it is organized. Often times programmers try to put way too much logic inside of a single method. Basically, this is unintended procedural encapsulation. I look to make sure that a method is doing one, or at most two, logical functions. Additional logical blocks should be refactored into their own methods for readability, clarity, and testing. <span>(I know I might have just sparked a heated debate about how much logic methods should include and how to properly build a code base, but that wasn’t my intent. I have a set of my personal beliefs, and I aim to implement and measure them during code review.)</span> In cases where code just can’t be broken out or the logic is quite complex, I’ll look for comments. Most code, at a very basic level, can be understood. However, with a complex variable variable or polymorphic interface, this becomes more confusing. I suggest comments near code that is not clearly understood if you’re unfamiliar with the project or codebase. I want to make sure a new programmer would be able to jump right in.</p>

    <p>So, these are the things that I look for in a code-review. I have noticed that I may want to start integrating more positive feedback in my reviews as well. Basically, if you take a lot of the opposites of what I mentioned, they’d make great positive statements, too, right? </p>

    <p>Also remember that the goal of code reviews is not to catch programmers making mistakes. Instead, we should all be creating teachable moments while keeping quality and consistent code. That’s why I often say that “I’ll bring it up” instead of “I’ll yell at the programmer” when referring to infractions in my review process. I would encourage you to frame things nicely and positively as well. As a great programmer, when you do code review, you hope for the best code to make your job really easy. But in cases where it is not, positively enforce quality.</p>
</article>